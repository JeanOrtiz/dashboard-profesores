import { __decorate, __read, __spread } from "tslib";
import { ViewChildren, ElementRef } from "@angular/core";
import { FormControlName, FormGroup, FormArray, } from "@angular/forms";
import { fromEvent, merge } from "rxjs";
import { debounceTime } from "rxjs/operators";
import * as ɵngcc0 from '@angular/core';
var FormComponentBase = /** @class */ (function () {
    function FormComponentBase() {
        this.validationMessages = {};
        this.formErrors = {};
    }
    FormComponentBase.prototype.startControlMonitoring = function (form, unsubscribePreviousForm) {
        var _this = this;
        if (unsubscribePreviousForm === void 0) { unsubscribePreviousForm = false; }
        if (unsubscribePreviousForm) {
            this.mySubs.unsubscribe();
        }
        // Watch for the blur event from any input element on the form.
        //  This is required because the valueChanges does not provide notification on blur.
        this.subscribe(form, this.formInputElements.toArray());
        this.formInputElements.changes.subscribe(function (inputs) {
            _this.subscribe(form, inputs.toArray());
        });
    };
    FormComponentBase.prototype.subscribe = function (form, inputsArray) {
        var _this = this;
        // console.log(inputsArray);
        var controlBlurs = inputsArray.map(function (formControl) {
            return fromEvent(formControl.nativeElement, "blur");
        });
        // Merge the blur event observable with the valueChanges observable so we only need to subscribe once.
        this.mySubs = merge.apply(void 0, __spread([form.valueChanges], controlBlurs)).pipe(debounceTime(300))
            .subscribe(function (value) {
            _this.logValidationErrors(form);
        });
    };
    FormComponentBase.prototype.logValidationErrors = function (group) {
        var _this = this;
        Object.keys(group.controls).forEach(function (key) {
            var abstractControl = group.get(key);
            _this.formErrors[key] = "";
            // console.log(key, abstractControl.invalid, abstractControl.touched, abstractControl.dirty);
            if (abstractControl &&
                !abstractControl.valid &&
                (abstractControl.touched || abstractControl.dirty)) {
                var messages = _this.validationMessages[key];
                for (var errorKey in abstractControl.errors) {
                    if (errorKey) {
                        _this.formErrors[key] += messages[errorKey] + " ";
                    }
                }
            }
            // console.log(this.formErrors);
            if (abstractControl instanceof FormGroup ||
                abstractControl instanceof FormArray) {
                _this.logValidationErrors(abstractControl);
            }
        });
    };
    FormComponentBase.prototype.atLeastOneCheckboxCheckedValidator = function (minRequired) {
        if (minRequired === void 0) { minRequired = 1; }
        return function validate(formGroup) {
            var checked = 0;
            Object.keys(formGroup.controls).forEach(function (key) {
                var control = formGroup.controls[key];
                if (control.value) {
                    checked++;
                }
            });
            if (checked < minRequired) {
                return {
                    requireCheckboxToBeChecked: true,
                };
            }
            return null;
        };
    };
    FormComponentBase.prototype.passwordsMustMatchValidator = function () {
        return function (group) {
            var currentPassword = group.get("password");
            var newPassword = group.get("confirmPassword");
            if (currentPassword && newPassword) {
                if (currentPassword.pristine || newPassword.pristine) {
                    return null;
                }
                if (currentPassword.value !== newPassword.value) {
                    return { passwordsMustMatch: true };
                }
            }
            return null;
        };
    };
    FormComponentBase.prototype.ngOnDestroy = function () {
        this.mySubs.unsubscribe();
    };
    __decorate([
        ViewChildren(FormControlName, { read: ElementRef })
    ], FormComponentBase.prototype, "formInputElements", void 0);
FormComponentBase.ɵfac = function FormComponentBase_Factory(t) { return new (t || FormComponentBase)(); };
FormComponentBase.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: FormComponentBase, viewQuery: function FormComponentBase_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(FormControlName, true, ElementRef);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.formInputElements = _t);
    } } });

    return FormComponentBase;
}());
export { FormComponentBase };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS1jb21wb25lbnQtYmFzZS5qcyIsInNvdXJjZXMiOlsibmc6L21hdGVoLW5nLW0tdmFsaWRhdGlvbi9saWIvZm9ybS1jb21wb25lbnQtYmFzZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFlBQVksRUFBRSxVQUFVLEVBQXdCLE1BQU0sZUFBZSxDQUFDO0FBQy9FLE9BQU8sRUFDTCxlQUFlLEVBQ2YsU0FBUyxFQUNULFNBQVMsR0FHVixNQUFNLGdCQUFnQixDQUFDO0FBQ3hCLE9BQU8sRUFBYyxTQUFTLEVBQUUsS0FBSyxFQUE0QixNQUFNLE1BQU0sQ0FBQztBQUM5RSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7O0FBRTlDO0lBQUE7UUFJUyx1QkFBa0IsR0FBaUQsRUFBRSxDQUFDO1FBQ3RFLGVBQVUsR0FBOEIsRUFBRSxDQUFDO0lBNEdwRCxDQUFDO0lBeEdXLGtEQUFzQixHQUFoQyxVQUNFLElBQWUsRUFDZix1QkFBK0I7UUFGakMsaUJBZ0JDO1FBZEMsd0NBQUEsRUFBQSwrQkFBK0I7UUFFL0IsSUFBSSx1QkFBdUIsRUFBRTtZQUMzQixJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsRUFBRSxDQUFDO1NBQzNCO1FBQ0QsK0RBQStEO1FBQy9ELG9GQUFvRjtRQUNwRixJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztRQUV2RCxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FDdEMsVUFBQyxNQUE2QjtZQUM1QixLQUFJLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztRQUN6QyxDQUFDLENBQ0YsQ0FBQztJQUNKLENBQUM7SUFFTyxxQ0FBUyxHQUFqQixVQUFrQixJQUFlLEVBQUUsV0FBeUI7UUFBNUQsaUJBY0M7UUFiQyw0QkFBNEI7UUFDNUIs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Qy9DLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxJQUFJLEVBQUUsQ0FBQztpQkFDckM7YUFDRjtZQUNELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQUVELHVDQUFXLEdBQVg7UUFDRSxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQzVCLENBQUM7SUE5R0Q7UUFEQyxZQUFZLENBQUMsZUFBZSxFQUFFLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxDQUFDO2dFQUNYOzs7Ozs7OztBQUMzQztJQThHQSx3QkFBQztDQUFBLEFBakhELElBaUhDO1NBakhZLGlCQUFpQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZpZXdDaGlsZHJlbiwgRWxlbWVudFJlZiwgUXVlcnlMaXN0LCBPbkRlc3Ryb3kgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHtcbiAgRm9ybUNvbnRyb2xOYW1lLFxuICBGb3JtR3JvdXAsXG4gIEZvcm1BcnJheSxcbiAgVmFsaWRhdG9yRm4sXG4gIFZhbGlkYXRpb25FcnJvcnMsXG59IGZyb20gXCJAYW5ndWxhci9mb3Jtc1wiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgZnJvbUV2ZW50LCBtZXJnZSwgU3Vic2NyaWJlciwgU3Vic2NyaXB0aW9uIH0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7IGRlYm91bmNlVGltZSB9IGZyb20gXCJyeGpzL29wZXJhdG9yc1wiO1xuXG5leHBvcnQgY2xhc3MgRm9ybUNvbXBvbmVudEJhc2UgaW1wbGVtZW50cyBPbkRlc3Ryb3kge1xuICBAVmlld0NoaWxkcmVuKEZvcm1Db250cm9sTmFtZSwgeyByZWFkOiBFbGVtZW50UmVmIH0pXG4gIGZvcm1JbnB1dEVsZW1lbnRzOiBRdWVyeUxpc3Q8RWxlbWVudFJlZj47XG5cbiAgcHVibGljIHZhbGlkYXRpb25NZXNzYWdlczogeyBba2V5OiBzdHJpbmddOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9IH0gPSB7fTtcbiAgcHVibGljIGZvcm1FcnJvcnM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fTtcblxuICBteVN1YnM6IFN1YnNjcmlwdGlvbjtcblxuICBwcm90ZWN0ZWQgc3RhcnRDb250cm9sTW9uaXRvcmluZyhcbiAgICBmb3JtOiBGb3JtR3JvdXAsXG4gICAgdW5zdWJzY3JpYmVQcmV2aW91c0Zvcm0gPSBmYWxzZVxuICApOiB2b2lkIHtcbiAgICBpZiAodW5zdWJzY3JpYmVQcmV2aW91c0Zvcm0pIHtcbiAgICAgIHRoaXMubXlTdWJzLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIC8vIFdhdGNoIGZvciB0aGUgYmx1ciBldmVudCBmcm9tIGFueSBpbnB1dCBlbGVtZW50IG9uIHRoZSBmb3JtLlxuICAgIC8vICBUaGlzIGlzIHJlcXVpcmVkIGJlY2F1c2UgdGhlIHZhbHVlQ2hhbmdlcyBkb2VzIG5vdCBwcm92aWRlIG5vdGlmaWNhdGlvbiBvbiBibHVyLlxuICAgIHRoaXMuc3Vic2NyaWJlKGZvcm0sIHRoaXMuZm9ybUlucHV0RWxlbWVudHMudG9BcnJheSgpKTtcblxuICAgIHRoaXMuZm9ybUlucHV0RWxlbWVudHMuY2hhbmdlcy5zdWJzY3JpYmUoXG4gICAgICAoaW5wdXRzOiBRdWVyeUxpc3Q8RWxlbWVudFJlZj4pID0+IHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmUoZm9ybSwgaW5wdXRzLnRvQXJyYXkoKSk7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgc3Vic2NyaWJlKGZvcm06IEZvcm1Hcm91cCwgaW5wdXRzQXJyYXk6IEVsZW1lbnRSZWZbXSkge1xuICAgIC8vIGNvbnNvbGUubG9nKGlucHV0c0FycmF5KTtcbiAgICBjb25zdCBjb250cm9sQmx1cnM6IE9ic2VydmFibGU8XG4gICAgICBhbnlcbiAgICA+W10gPSBpbnB1dHNBcnJheS5tYXAoKGZvcm1Db250cm9sOiBFbGVtZW50UmVmKSA9PlxuICAgICAgZnJvbUV2ZW50KGZvcm1Db250cm9sLm5hdGl2ZUVsZW1lbnQsIFwiYmx1clwiKVxuICAgICk7XG5cbiAgICAvLyBNZXJnZSB0aGUgYmx1ciBldmVudCBvYnNlcnZhYmxlIHdpdGggdGhlIHZhbHVlQ2hhbmdlcyBvYnNlcnZhYmxlIHNvIHdlIG9ubHkgbmVlZCB0byBzdWJzY3JpYmUgb25jZS5cbiAgICB0aGlzLm15U3VicyA9IG1lcmdlKGZvcm0udmFsdWVDaGFuZ2VzLCAuLi5jb250cm9sQmx1cnMpXG4gICAgICAucGlwZShkZWJvdW5jZVRpbWUoMzAwKSlcbiAgICAgIC5zdWJzY3JpYmUoKHZhbHVlKSA9PiB7XG4gICAgICAgIHRoaXMubG9nVmFsaWRhdGlvbkVycm9ycyhmb3JtKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBsb2dWYWxpZGF0aW9uRXJyb3JzKGdyb3VwOiBGb3JtR3JvdXAgfCBGb3JtQXJyYXkpOiB2b2lkIHtcbiAgICBPYmplY3Qua2V5cyhncm91cC5jb250cm9scykuZm9yRWFjaCgoa2V5OiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IGFic3RyYWN0Q29udHJvbCA9IGdyb3VwLmdldChrZXkpO1xuXG4gICAgICB0aGlzLmZvcm1FcnJvcnNba2V5XSA9IFwiXCI7XG4gICAgICAvLyBjb25zb2xlLmxvZyhrZXksIGFic3RyYWN0Q29udHJvbC5pbnZhbGlkLCBhYnN0cmFjdENvbnRyb2wudG91Y2hlZCwgYWJzdHJhY3RDb250cm9sLmRpcnR5KTtcbiAgICAgIGlmIChcbiAgICAgICAgYWJzdHJhY3RDb250cm9sICYmXG4gICAgICAgICFhYnN0cmFjdENvbnRyb2wudmFsaWQgJiZcbiAgICAgICAgKGFic3RyYWN0Q29udHJvbC50b3VjaGVkIHx8IGFic3RyYWN0Q29udHJvbC5kaXJ0eSlcbiAgICAgICkge1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IHRoaXMudmFsaWRhdGlvbk1lc3NhZ2VzW2tleV07XG4gICAgICAgIGZvciAoY29uc3QgZXJyb3JLZXkgaW4gYWJzdHJhY3RDb250cm9sLmVycm9ycykge1xuICAgICAgICAgIGlmIChlcnJvcktleSkge1xuICAgICAgICAgICAgdGhpcy5mb3JtRXJyb3JzW2tleV0gKz0gbWVzc2FnZXNbZXJyb3JLZXldICsgXCIgXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmZvcm1FcnJvcnMpO1xuICAgICAgaWYgKFxuICAgICAgICBhYnN0cmFjdENvbnRyb2wgaW5zdGFuY2VvZiBGb3JtR3JvdXAgfHxcbiAgICAgICAgYWJzdHJhY3RDb250cm9sIGluc3RhbmNlb2YgRm9ybUFycmF5XG4gICAgICApIHtcbiAgICAgICAgdGhpcy5sb2dWYWxpZGF0aW9uRXJyb3JzKGFic3RyYWN0Q29udHJvbCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhdExlYXN0T25lQ2hlY2tib3hDaGVja2VkVmFsaWRhdG9yKG1pblJlcXVpcmVkID0gMSk6IFZhbGlkYXRvckZuIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gdmFsaWRhdGUoZm9ybUdyb3VwOiBGb3JtR3JvdXAgfCBGb3JtQXJyYXkpIHtcbiAgICAgIGxldCBjaGVja2VkID0gMDtcblxuICAgICAgT2JqZWN0LmtleXMoZm9ybUdyb3VwLmNvbnRyb2xzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgY29uc3QgY29udHJvbCA9IGZvcm1Hcm91cC5jb250cm9sc1trZXldO1xuXG4gICAgICAgIGlmIChjb250cm9sLnZhbHVlKSB7XG4gICAgICAgICAgY2hlY2tlZCsrO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKGNoZWNrZWQgPCBtaW5SZXF1aXJlZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHJlcXVpcmVDaGVja2JveFRvQmVDaGVja2VkOiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICB9XG5cbiAgcGFzc3dvcmRzTXVzdE1hdGNoVmFsaWRhdG9yKCk6IFZhbGlkYXRvckZuIHtcbiAgICByZXR1cm4gKGdyb3VwOiBGb3JtR3JvdXApOiBWYWxpZGF0aW9uRXJyb3JzIHwgbnVsbCA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50UGFzc3dvcmQgPSBncm91cC5nZXQoXCJwYXNzd29yZFwiKTtcbiAgICAgIGNvbnN0IG5ld1Bhc3N3b3JkID0gZ3JvdXAuZ2V0KFwiY29uZmlybVBhc3N3b3JkXCIpO1xuXG4gICAgICBpZiAoY3VycmVudFBhc3N3b3JkICYmIG5ld1Bhc3N3b3JkKSB7XG4gICAgICAgIGlmIChjdXJyZW50UGFzc3dvcmQucHJpc3RpbmUgfHwgbmV3UGFzc3dvcmQucHJpc3RpbmUpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudFBhc3N3b3JkLnZhbHVlICE9PSBuZXdQYXNzd29yZC52YWx1ZSkge1xuICAgICAgICAgIHJldHVybiB7IHBhc3N3b3Jkc011c3RNYXRjaDogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5teVN1YnMudW5zdWJzY3JpYmUoKTtcbiAgfVxufVxuIl19